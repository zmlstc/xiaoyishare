(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-wxlogin"],{"32e2":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.isCanUse?t._e():i("v-uni-view",[t.isBind?t._e():i("v-uni-view",[i("v-uni-view",{staticClass:"welcome mb40 mt40"},[i("v-uni-view",{staticClass:"title"},[t._v("欢迎您使用微信登陆小易")]),i("v-uni-view",{staticClass:"text"},[t._v("您可以绑定新的或已有小易账号")])],1),i("v-uni-view",{staticClass:"nav-reg b-line"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"phone"})],1),i("v-uni-view",{staticClass:"item3 ml10"},[i("v-uni-input",{attrs:{type:"number",placeholder:"请输入手机号","placeholder-class":"pl-class",maxlength:"11"},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber=e},expression:"phoneNumber"}})],1),60==t.countdown?i("v-uni-view",{staticClass:"item4",on:{click:function(e){e=t.$handleEvent(e),t.toSendSms(e)}}},[i("v-uni-text",{staticClass:"title"},[t._v(t._s(t.showTxt))])],1):t._e(),t.countdown<60?i("v-uni-view",{staticClass:"item4"},[i("v-uni-text",{staticClass:"again"},[t._v("重新获取("+t._s(t.countdown)+"s)")])],1):t._e()],1),i("v-uni-view",{staticClass:"nav-reg b-line"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"yz"})],1),i("v-uni-view",{staticClass:"item2"},[i("v-uni-input",{attrs:{type:"number",placeholder:"填写6位动态码","placeholder-class":"pl-class",maxlength:"6"},model:{value:t.smscode,callback:function(e){t.smscode=e},expression:"smscode"}})],1)],1),i("v-uni-view",{staticClass:"nav-reg b-line"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"yq"})],1),i("v-uni-view",{staticClass:"item2"},[i("v-uni-input",{attrs:{placeholder:"填写邀请码","placeholder-class":"pl-class",maxlength:"10"},model:{value:t.invitecode,callback:function(e){t.invitecode=e},expression:"invitecode"}})],1)],1),i("v-uni-view",{staticClass:"nav-reg b-line"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"pass"})],1),i("v-uni-view",{staticClass:"item2"},[i("v-uni-input",{attrs:{placeholder:"大于6位的字母加数字组合","placeholder-class":"pl-class",maxlength:"20"},on:{blur:function(e){e=t.$handleEvent(e),t.checkpwd1(e)}},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1)],1),i("v-uni-view",{staticClass:"nav-reg b-line"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"qr"})],1),i("v-uni-view",{staticClass:"item2"},[i("v-uni-input",{attrs:{placeholder:"重复输入密码","placeholder-class":"pl-class",maxlength:"20"},on:{blur:function(e){e=t.$handleEvent(e),t.checkpwd2(e)}},model:{value:t.pwd2,callback:function(e){t.pwd2=e},expression:"pwd2"}})],1)],1),i("v-uni-view",{staticClass:"agree mt10"},[i("v-uni-checkbox-group",{on:{change:function(e){e=t.$handleEvent(e),t.checkboxChange(e)}}},[i("v-uni-checkbox",{attrs:{color:"#00BAAD",value:"1"}}),t._v("我已了解并同意"),i("v-uni-text",[t._v("《小易共享平台用户协议》")])],1)],1),i("v-uni-button",{staticClass:"btn mt40",on:{click:function(e){e=t.$handleEvent(e),t.nextReg(e)}}},[t._v("确认注册")]),i("v-uni-view",{staticClass:"warn mt20"},[i("v-uni-text",{on:{click:function(e){e=t.$handleEvent(e),t.toShow("1")}}},[t._v("绑定已有账号")])],1)],1),t.isBind?i("v-uni-view",[i("v-uni-view",{staticClass:"welcome mb40 mt40"},[i("v-uni-view",{staticClass:"title"},[t._v("绑定已有小易共享账号")]),i("v-uni-view",{staticClass:"text"},[t._v("绑定后可通过微信快捷登陆")])],1),i("v-uni-view",{staticClass:"nav-reg b-line"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"phone"})],1),i("v-uni-view",{staticClass:"item3 ml10"},[i("v-uni-input",{attrs:{type:"number",placeholder:"请输入手机号","placeholder-class":"pl-class",maxlength:"11"},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber=e},expression:"phoneNumber"}})],1),60==t.countdown?i("v-uni-view",{staticClass:"item4",on:{click:function(e){e=t.$handleEvent(e),t.toSendSms2(e)}}},[i("v-uni-text",{staticClass:"title"},[t._v(t._s(t.showTxt))])],1):t._e(),t.countdown<60?i("v-uni-view",{staticClass:"item4"},[i("v-uni-text",{staticClass:"again"},[t._v("重新获取("+t._s(t.countdown)+"s)")])],1):t._e()],1),i("v-uni-view",{staticClass:"nav-reg b-line"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"yz"})],1),i("v-uni-view",{staticClass:"item2"},[i("v-uni-input",{attrs:{type:"number",placeholder:"填写6位动态码","placeholder-class":"pl-class",maxlength:"6"},model:{value:t.smscode,callback:function(e){t.smscode=e},expression:"smscode"}})],1)],1),i("v-uni-button",{staticClass:"btn mt40",on:{click:function(e){e=t.$handleEvent(e),t.nextBind(e)}}},[t._v("确认绑定")]),i("v-uni-view",{staticClass:"warn mt20"},[i("v-uni-text",{on:{click:function(e){e=t.$handleEvent(e),t.toShow("0")}}},[t._v("注册新账号")])],1)],1):t._e()],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},4946:function(t,e,i){"use strict";i.r(e);var n=i("4fae"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"4fae":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("cebc")),o=i("2f62"),s={data:function(){return{showTxt:"获取动态码",countdown:60,cTimer:null,phoneNumber:"",smscode:"",invitecode:"",isagree:!1,pwd:"",pwd2:"",SessionKey:"",unionid:"",nickName:null,avatarUrl:null,isCanUse:uni.getStorageSync("isCanUse")||!0,isBind:!1}},computed:(0,o.mapState)(["hasLogin","sStoreId"]),methods:(0,a.default)({},(0,o.mapMutations)(["setToken","setUserInfo"]),{toShow:function(t){"1"===t?(this.clearTimer(),this.showTxt="获取动态码",this.smscode="",this.isBind=!0):"0"===t&&(this.clearTimer(),this.showTxt="获取动态码",this.smscode="",this.isBind=!1)},login:function(t){var e=this;uni.showLoading({title:"登录中..."}),e.$Request.post("connect/index",{code:t}).then(function(t){200==t.code?("10"==t.datas.state?(e.isCanUse=!1,e.SessionKey=t.datas.SessionKey,e.unionid=t.datas.unionid):(console.log(t),e.setToken(t.datas.token),e.setUserInfo(t.datas),uni.navigateTo({url:"/pages/member/login"})),uni.hideLoading()):(uni.hideLoading(),uni.showToast({icon:"none",title:t.datas.error,duration:2e3}))})},getPhoneNumber:function(t){var e=this;console.log(t.detail.errMsg),console.log(t.detail.iv),console.log(t.detail.encryptedData),e.$Request.post("connect/wxminphone",{iv:t.detail.iv,epdata:t.detail.encryptedData,skey:this.skey}).then(function(t){200==t.code?("10"==t.datas.state?e.isCanUse=!1:(console.log(t),e.setToken(t.datas.token),e.setUserInfo(t.datas),uni.redirectTo({url:"/pages/store/pay?store_id="+e.sStoreId,success:function(t){}})),uni.hideLoading()):(uni.hideLoading(),uni.showToast({icon:"none",title:t.datas.error,duration:2e3}))})},toSendSms:function(){var t=this;if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber))return uni.showToast({title:"请填写正确手机号码",icon:"none"}),!1;t.$Request.post("connect/checkmob",{phone:t.phoneNumber}).then(function(e){200==e.code&&"1"==e.datas?t.$Request.post("connect/get_sms_captcha",{phone:t.phoneNumber,type:1}).then(function(e){200==e.code?(console.log(e),t.startTimer(),uni.showToast({title:"验证码已发送",icon:"none",duration:2e3})):uni.showToast({icon:"none",title:e.datas.error,duration:2e3})}):uni.showToast({icon:"none",title:"手机号码已存在",duration:2e3})})},startTimer:function(){var t=this;null==t.cTimer&&(t.cTimer=setInterval(function(){t.countdown--,0==t.countdown&&t.clearTimer()},1e3))},clearTimer:function(){var t=this;clearInterval(t.cTimer),t.cTimer=null,t.countdown=60,t.showTxt="重新发送"},checkboxChange:function(t){console.log("--------------"),console.log(t.detail.value[0]),t.detail.value.length>0&&(this.isagree=!0),console.log(this.isagree)},checkpwd1:function(t){var e=t.detail.value;if(!/^(?=.*?[a-z)(?=.*>[A-Z])(?=.*?[0-9])[a-zA_Z0-9]{6,10}$/.test(e))return uni.showToast({title:"密码必须大于6位包含数字和字母",icon:"none"}),!1},checkpwd2:function(t){if(this.pwd!=this.pwd2)return uni.showToast({title:"两次输入的密码不一致",icon:"none"}),!1},nextReg:function(){var t=this;return/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber)?/^[0-9]*$/.test(this.smscode)&&6==this.smscode.length?!/^[A-Za-z0-9]+$/.test(this.invitecode)||this.invitecode.length<3?(uni.showToast({title:"请填写正确的邀请码",icon:"none"}),!1):/^(?=.*?[a-z)(?=.*>[A-Z])(?=.*?[0-9])[a-zA_Z0-9]{6,10}$/.test(this.pwd)?this.pwd!=this.pwd2?(uni.showToast({title:"两次输入的密码不一致",icon:"none"}),!1):this.isagree?(uni.showLoading({title:"正在处理中..."}),void t.$Request.post("connect/check_sms_invite",{phone:t.phoneNumber,yzcode:t.smscode,invcode:t.invitecode,type:1}).then(function(e){if(200==e.code){console.log(e);var i={phone:t.phoneNumber,yzcode:t.smscode,invcode:t.invitecode,type:1,password:t.pwd,password_confirm:t.pwd2,unionid:t.unionid,nickname:t.nickName};t.$Request.post("connect/wxmini_register",i).then(function(e){200==e.code?(console.log(e),t.setToken(e.datas.token),t.setUserInfo(e.datas),uni.redirectTo({url:"/pages/store/pay?store_id="+t.sStoreId,success:function(t){}})):(uni.hideLoading(),uni.showToast({icon:"none",title:e.datas.error,duration:2e3}))})}else uni.hideLoading(),uni.showToast({icon:"none",title:e.datas.error,duration:2e3})})):(uni.showToast({title:"请选择同意注册协议",icon:"none",duration:2e3}),!1):(uni.showToast({title:"密码必须大于6位包含数字和字母",icon:"none"}),!1):(uni.showToast({title:"请填写正确的验证码",icon:"none"}),!1):(uni.showToast({title:"请填写正确手机号码",icon:"none"}),!1)},nextBind:function(){var t=this;if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber))return uni.showToast({title:"请填写正确手机号码",icon:"none"}),!1;if(!/^[0-9]*$/.test(this.smscode)||6!=this.smscode.length)return uni.showToast({title:"请填写正确的验证码",icon:"none"}),!1;if(""==t.unionid)return uni.showToast({title:"登陆参数错误！",icon:"none"}),!1;uni.showLoading({title:"正在处理中..."});var e={phone:t.phoneNumber,yzcode:t.smscode,type:2,unionid:t.unionid};t.$Request.post("connect/wxbindMember",e).then(function(e){200==e.code?(console.log(e),t.setToken(e.datas.token),t.setUserInfo(e.datas),uni.hideLoading(),uni.redirectTo({url:"/pages/store/pay?store_id="+t.sStoreId,success:function(t){}})):(uni.hideLoading(),uni.showToast({icon:"none",title:e.datas.error,duration:2e3}))})},toSendSms2:function(){var t=this;if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber))return uni.showToast({title:"请填写正确手机号码",icon:"none"}),!1;t.$Request.post("connect/get_sms_captcha",{phone:t.phoneNumber,type:2}).then(function(e){200==e.code?(console.log(e),t.startTimer(),uni.showToast({title:"验证码已发送",icon:"none",duration:2e3})):uni.showToast({icon:"none",title:e.datas.error,duration:2e3})})}}),onLoad:function(t){console.log(t),this.login(t.code)}};e.default=s},"56af":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".header[data-v-a947d94c]{margin:%?90?% 0 %?90?% %?50?%;border-bottom:1px solid #ccc;text-align:center;width:%?650?%;height:%?300?%;line-height:%?450?%}.header uni-image[data-v-a947d94c]{width:%?200?%;height:%?200?%}.content[data-v-a947d94c]{margin-left:%?50?%;margin-bottom:%?90?%}.content uni-text[data-v-a947d94c]{display:block;color:#9d9d9d}.bottom[data-v-a947d94c]{border-radius:%?80?%;margin:%?70?% %?50?%;font-size:%?35?%}",""])},"5a89":function(t,e,i){var n=i("56af");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("2dd2c472",n,!0,{sourceMap:!1,shadowMode:!1})},"618d":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".welcome[data-v-a947d94c]{height:%?92?%;text-align:right;width:90%;padding:0 5%}.welcome .title[data-v-a947d94c]{line-height:%?56?%;font-size:%?38?%}.welcome .text[data-v-a947d94c]{line-height:%?36?%;color:#999}.agree[data-v-a947d94c]{height:%?48?%;width:80%;padding:0 10%;font-size:%?24?%;color:#999}.agree uni-text[data-v-a947d94c]{color:#00baad}.nav-reg[data-v-a947d94c]{width:90%;margin:0 5%;height:%?98?%;font-size:%?34?%}\r\n/*高度48px栏目条*/.nav-reg uni-input[data-v-a947d94c]{width:100%;height:%?98?%;font-size:%?28?%;color:#666}.nav-reg .item[data-v-a947d94c]{width:22%;line-height:%?98?%;float:left;text-align:right}.nav-reg .item .acc[data-v-a947d94c]{float:right;width:%?58?%;height:%?98?%;background:url(https://www.fhlego.com/static/login-0.png) 50% no-repeat;background-size:80%}.nav-reg .item .pass[data-v-a947d94c]{float:right;width:%?58?%;height:%?98?%;background:url(https://www.fhlego.com/static/login-2.png) 50% no-repeat;background-size:80%}.nav-reg .item .phone[data-v-a947d94c]{float:right;width:%?58?%;height:%?98?%;background:url(https://www.fhlego.com/static/login-1.png) 50% no-repeat;background-size:80%}.nav-reg .item .qr[data-v-a947d94c]{float:right;width:%?58?%;height:%?98?%;background:url(https://www.fhlego.com/static/login-5.png) 50% no-repeat;background-size:80%}.nav-reg .item .yq[data-v-a947d94c]{float:right;width:%?58?%;height:%?98?%;background:url(https://www.fhlego.com/static/login-4.png) 50% no-repeat;background-size:80%}.nav-reg .item .yz[data-v-a947d94c]{float:right;width:%?58?%;height:%?98?%;background:url(https://www.fhlego.com/static/login-3.png) 50% no-repeat;background-size:80%}.nav-reg .item2[data-v-a947d94c]{width:55%;line-height:%?98?%;float:left;color:#999;font-size:%?30?%;margin-left:%?20?%}.nav-reg .item3[data-v-a947d94c]{width:40%;line-height:%?98?%;float:left;color:#999;font-size:%?30?%;margin-left:%?20?%}.nav-reg .item4[data-v-a947d94c]{line-height:%?98?%;float:left;padding:%?24?% 0}.nav-reg .item4 .title[data-v-a947d94c]{padding:%?6?% %?16?%;background:#00baad;line-height:%?38?%;float:left;overflow:hidden;font-size:%?24?%;border-radius:%?30?%;color:#fff}.nav-reg .item4 .again[data-v-a947d94c]{padding:%?6?% %?16?%;background:#ccc;line-height:%?38?%;float:left;overflow:hidden;font-size:%?24?%;border-radius:%?30?%;color:#fff}.nav-reg .item5[data-v-a947d94c]{width:32%;line-height:%?98?%;float:left;text-align:right}.nav-reg .item6[data-v-a947d94c]{width:64%;line-height:%?98?%;float:left;margin-left:%?20?%;color:#999;font-size:%?28?%}.nav-reg .area[data-v-a947d94c]{width:64%;height:%?98?%;line-height:%?98?%;float:left;margin-left:%?20?%;color:#999;font-size:%?28?%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.nav-reg .item6 .text[data-v-a947d94c]{float:right;font-size:%?26?%;color:#00baad}.nav-reg .item6 .upload[data-v-a947d94c]{float:left;font-size:%?48?%;border:#ccc %?2?% solid;height:%?48?%;width:%?48?%;margin:%?25?% %?20?% 0 0;line-height:%?38?%;text-align:center}.header[data-v-a947d94c]{width:%?161?%;height:%?161?%;background:#3fcdeb;-webkit-box-shadow:%?0?% %?12?% %?13?% %?0?% rgba(63,205,235,.47);box-shadow:%?0?% %?12?% %?13?% %?0?% rgba(63,205,235,.47);border-radius:50%;margin-top:%?30?%;margin-left:auto;margin-right:auto}.header uni-image[data-v-a947d94c]{width:%?161?%;height:%?161?%;border-radius:50%}.wxname[data-v-a947d94c]{width:100%;line-height:%?48?%;text-align:center;font-size:%?38?%}.tishi[data-v-a947d94c]{width:100%;line-height:%?48?%;text-align:center}.tishi uni-text[data-v-a947d94c]{color:#00cf38}",""])},"6a6d":function(t,e,i){"use strict";var n=i("5a89"),a=i.n(n);a.a},"844b":function(t,e,i){"use strict";i.r(e);var n=i("32e2"),a=i("4946");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("9132"),i("6a6d");var s=i("2877"),c=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"a947d94c",null);e["default"]=c.exports},9132:function(t,e,i){"use strict";var n=i("9768"),a=i.n(n);a.a},9768:function(t,e,i){var n=i("618d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("ae2891f4",n,!0,{sourceMap:!1,shadowMode:!1})}}]);